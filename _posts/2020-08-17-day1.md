---
layout: post
title: День 1
descr: переменные, простые типы данных и интерполяция строк
---

# **Первые шаги в Swift**

Как однажды сказал Марк Твен, «секрет успеха в том, чтобы начать». Итак, вы начали, поэтому мы собираемся погрузиться в изучение переменных, констант и простых типов данных.

> Не торопитесь! Гораздо лучше заниматься один час каждый день, чем заниматься сразу много и делать большие промежутки между подходами.

****
## **Переменные**

Когда вы запускаете Xcode, он спросит вас, что вы хотите сделать, и я бы хотел, чтобы вы выбрали «Get Started with a Playground» - это песочница, в которой вы можете ввести код Swift и сразу увидеть результаты.

По умолчанию для iOS это пустая площадка, и это нормально, поэтому нажмите «Next», затем «Create», чтобы сохранить ее на рабочем столе.

Сегодня я хочу познакомить вас с переменными, в которых вы можете хранить данные программы. Они называются переменными, потому что они могут изменяться - вы можете свободно изменять их значения.

«Playground» начинается со строки кода, которая создает для нас переменную:

```swift
var str = "Hello, playground"
```

Так создается новая переменная с именем `str`, которой присваивается значение «Hello, playground». Справа от площадки вы можете увидеть «Hello, playground» в области вывода - это Xcode, показывающий, что значение было установлено.

Поскольку `str` - это переменная, мы можем ее изменить:

```swift
str = "Goodbye"
```

Второй раз `var` нам не нужен, потому что переменная уже создана - мы ее просто меняем.

### **Почему в Swift есть переменные?**

*Обновлено для Xcode 12.0*

Переменные позволяют нам хранить временную информацию в нашей программе и составляют ключевую часть почти каждой программы Swift. В конечном итоге ваша программа каким-то образом преобразует данные: может быть, вы позволите пользователю ввести задачи в список дел, а затем отметить их, может быть, вы позволите им бродить по пустынному острову, работая на капиталистического енота, или, может быть, вы прочитаете время устройства и отобразите это в часах. В любом случае, вы берете какие-то данные, как-то преобразуете их и показываете пользователю.

Конечно, настоящая магия заключается в том, чтобы «каким-то образом преобразовать», потому что именно здесь рождается ваша блестящая идея приложения. Но процесс хранения данных в памяти - удержание того, что напечатал пользователь, или что-то, что вы скачали из Интернета, - вот где на помощь приходят переменные.

Создав переменную с помощью `var`, вы можете изменять ее так часто, как хотите, без повторного использования `var`. Например:

```swift
var favoriteShow = "Orange is the New Black"
favoriteShow = "The Good Place"
favoriteShow = "Doctor Who"
```

Если это поможет, попробуйте прочитать `var` как «создать новую переменную». Итак, первая строка выше может быть прочитана вслух как «создайте новую переменную с именем *favavourShow* и присвойте ей значение *Orange is the New Black*». Строки 2 и 3 не содержат `var`, поэтому они изменяют существующее значение, а не создают новую переменную.

Теперь представьте, что у вас есть `var` во всех трех строках - вы каждый раз используете `var favavourShow`. Это не имело бы особого смысла, потому что вы бы трижды говорили «создайте новую переменную с именем *favouriteShow»*, а переменная явно не новая после вашей первой попытки. Swift отметит это как ошибку, что означает, что он не позволит вам запустить код, пока вы не выберете другое имя для своих переменных.

Это может показаться раздражающим поведением, но поверьте мне: это полезно! Swift хочет, чтобы вы прояснили: пытаетесь ли вы изменить существующую переменную (если да, удалите `var` во второй и последующие разы), или вы пытаетесь создать новую переменную (в этом случае назовите ее как-нибудь по-другому).

И последнее: хотя переменные составляют основу многих программ Swift, вы узнаете, что иногда их лучше избегать. Подробнее об этом позже!

****
## **Строки и целые числа**

Swift - это так называемый типобезопасный язык, что означает, что каждая переменная должна быть одного определенного типа. Переменная `str`, созданная для нас Xcode, содержит строку букв, означающую «Hello, playground», поэтому Swift присваивает ей тип `String`.

С другой стороны, если мы хотим сохранить чей-то возраст, мы можем создать такую переменную:

```swift
var age = 38
```

Это целое число, поэтому Swift присваивает тип `Int` - сокращение от «integer».

Если у вас большие числа, Swift позволяет использовать символы подчеркивания в качестве разделителей тысяч - они не меняют числа, но облегчают чтение. Например:

```swift
var population = 8_000_000
```

> Строки и целые числа - это разные типы, и их нельзя смешивать.

### **Почему Swift - это типобезопасный язык?**

*Обновлено для Xcode 12.0*

Swift позволяет нам создавать переменные как строки и целые числа, а также многие другие типы данных. Когда вы создаете переменную, Swift может определить, какого типа переменная, на основе того, какие данные вы ей присваиваете, и с этого момента эта переменная всегда будет иметь этот конкретный тип.

Например, при этом создается новая переменная с именем `senseOfLife`, равная 42:

```swift
var meaningOfLife = 42
```

Поскольку мы присвоили 42 в качестве начального значения `meaningOfLife`, Swift присвоит ему тип *integer* - целое число. Это переменная, что означает, что мы можем изменять ее значение так часто, как нам нужно, но мы не можем изменять ее тип: оно всегда будет целым числом.

Это очень полезно при создании приложений, потому что это означает, что Swift позаботится о том, чтобы мы не ошибались с нашими данными. Например, мы не можем написать это:

```swift
meaningOfLife = "Forty two"
```

Мы пытаеемся присвоить строку переменной, которая является целым числом, что недопустимо.

Подумайте об этом: мы только что создали одну переменную, а затем попытались изменить ее тип, что, очевидно, потерпело неудачу. Но по мере увеличения размера и сложности ваших программ становится невозможным постоянно держать в голове типы переменных, поэтому мы фактически перекладываем эту работу на Swift.

****
## **Многострочные строки**

В стандартных строках Swift используются двойные кавычки, но вы не можете включать в них разрывы строк.

Если вам нужны многострочные строки, вам понадобится немного другой синтаксис: начало и конец строки должны начинаться тремя двойными кавычками, например:

```swift
var str1 = """
This goes
over multiple
lines
"""
```

Swift очень внимательно относится к тому, как вы пишете эти кавычки: открывающая и закрывающая тройка должна находиться на отдельной строке, но открывающая и закрывающая разрывы строк не включаются в вашу последнюю строку.

Если вам нужны только многострочные строки для аккуратного форматирования кода, и вы не хотите, чтобы эти разрывы строк действительно присутствовали в вашей строке, завершайте каждую строку символом `\`, например:

```swift
var str2 = """
This goes \
over multiple \
lines
"""
```

****
## **Двойные и логические значения**

Два других основных типа данных в Swift - это двойные и логические значения, и вы будете часто их использовать.

«Double» - это сокращение от «число с плавающей запятой двойной точности», и это причудливый способ сказать, что оно содержит дробные значения, такие как 38,1 или 3,141592654.

Каждый раз, когда вы создаете переменную с дробным числом, Swift автоматически присваивает этой переменной тип `Double`. Например:

```swift
var pi = 3.141
```

Двойные числа отличаются от целых, и их нельзя смешать.

Что касается логических значений, они намного проще: они просто содержат либо истина, либо ложь, а Swift автоматически присваивает логический тип любой переменной, которой присвоено значение истина или ложь.

Например:

```swift
var awesome = true
```

### **Почему Swift нужны как Double, так и Integer?**

*Обновлено для Xcode 12.0*

Swift дает нам несколько различных способов хранения чисел в нашем коде, и они предназначены для решения различных задач. Swift не позволяет нам смешивать их вместе, потому что это приведет к проблемам.

Два основных типа чисел, которые вы будете использовать, называются целыми и двойными. Целые числа содержат целые числа, такие как 0, 1, -100 и 65 миллионов, тогда как двойные числа содержат десятичные числа, такие как 0,1, -1,001 и 3,141592654.

При создании числовой переменной Swift решает, считать ли ее целым или двойным числом, в зависимости от того, включена ли десятичная точка. Например:

```swift
var myInt = 1
var myDouble = 1.0
```

Как видите, оба они содержат число 1, но первое - целое, а второе - двойное.

Теперь, если они оба содержат число 1, вы можете задаться вопросом, почему мы не можем сложить их вместе - почему мы не можем написать `var total = myInt + myDouble`? Ответ заключается в том, что Swift работает осторожно: мы оба видим, что 1 плюс 1,0 будет 2, но double - это переменная, поэтому ее можно изменить на 1,1 или 3,5. Как Swift может быть уверен в безопасности добавления целого числа к двойному - как быть уверенным, что вы не потеряете 0,1 или 0,5?

Ответ в том, что это небезопасно, поэтому это запрещено. Сначала это будет вас раздражать, но поверьте мне: это полезно.
****
## **Строчная интерполяция**

Вы видели, как вы можете вводить значения для строк прямо в код, но Swift также имеет функцию, называемую интерполяцией строк - возможность помещать переменные внутри ваших строк, чтобы сделать их более полезными.

Вы можете поместить в строку любой тип переменной - все, что вам нужно сделать, это написать обратную косую черту, `\`, а затем указать имя переменной в круглых скобках. Например:

```swift
var score = 85
var str = "Your score was \(score)"
```

Как вы можете видеть в полученном результате, для переменной `str` устанавливается значение «Your score was 85».

Вы можете делать это столько раз, сколько вам нужно, создавая строки из строк, если хотите:

```swift
var results = "The test results are here: \(str)"
```

Как вы увидите позже, интерполяция строк не ограничивается только размещением переменных - вы действительно можете запускать код внутри них.

### **Почему в Swift есть строковая интерполяция?**

*Обновлено для Xcode 12.0*

Когда приходит время показывать информацию вашему пользователю - будь то распечатанные сообщения, текст на кнопках или что-то еще, что соответствует идее вашего приложения, - вы обычно в значительной степени полагаетесь на строки.

Конечно, нам нужны не только статические строки, потому что мы хотим показать пользователю какие-то релевантные данные, которые они могут использовать. Итак, Swift предоставляет нам строковую интерполяцию как способ внедрения пользовательских данных в строки во время выполнения: он заменяет одну или несколько частей строки данными, предоставленными нами.

Например:

```swift
var city = "Cardiff"
var message = "Welcome to \(city)!"
```

Конечно, в этом тривиальном примере мы могли просто написать название нашего города прямо в строке - «Welcome to Cardiff!» - но в реальных приложениях динамическая вставка важна, потому что это позволяет нам отображать реальные пользовательские данные, а не то, что мы вводим сами.

Swift может помещать любые данные внутри строковой интерполяции. Результат может быть не всегда удачным, но для всех основных типов Swift - результат вполне уместен.

****
## **Константы**

Я уже сказал, что переменные носят такое имя, потому что их значения могут меняться со временем, и это часто бывает полезно. Однако очень часто вы хотите установить значение один раз и никогда не изменять его, поэтому у нас есть альтернатива ключевому слову `var`, называемая `let`.

Ключевое слово `let` создает константы, которые представляют собой значения, которые можно устанавливать только один раз. Например:

```swift
let taylor = "swift"
```

Если вы попытаетесь изменить константу, то Xcode откажется запускать ваш код. Это форма безопасности: когда вы используете константы, вы больше не можете случайно их изменять.

Когда вы пишете свой собственный код Swift, вы всегда должны использовать `let`, если вы не хотите изменить значение. Фактически, Xcode предупредит вас, если вы используете `var`, но не меняйте переменную.

### **Почему в Swift есть не только переменные, но и константы?**

*Обновлено для Xcode 12.0*

Переменные - отличный способ хранить временные данные в ваших программах, но Swift дает нам второй вариант, который еще лучше: константы. Они идентичны переменным во всех отношениях, с одним важным отличием: мы не можем изменить их значения после их установки.

Swift действительно любит константы и фактически порекомендует вам использовать их, если вы создали переменную и не изменили ее значение. Причина этого в том, чтобы избежать проблем: любая создаваемая вами переменная может быть изменена вами в любое время и так часто, как вы хотите, поэтому вы теряете некоторый контроль.

Константы не позволяют нам изменять значения после их установки, поэтому это немного похоже на контракт со Swift: вы говорите: «это значение имеет значение, не позволяйте мне изменять его, что бы я ни делал». Конечно, вы можете попытаться заключить тот же контракт с переменной, но одна ошибка клавиатуры может испортить ситуацию, и Swift не сможет помочь. Используя вместо этого константу - просто изменив `var` на `let` - вы просите Swift убедиться, что значение никогда не меняется, а это еще одна вещь, о которой вам больше не нужно беспокоиться.

****
## **Аннотации типов**

Swift присваивает каждой переменной и константе тип в зависимости от того, какое значение ей присвоено при создании. Итак, когда вы пишете такой код, Swift может видеть, что он содержит строку:

```swift
let str = "Hello, playground"
```

Это превратит `str` в строку, поэтому вы не сможете пытаться присвоить ей целое или логическое значение позже. Это называется выводом типа: Swift может сделать вывод о типе чего-либо на основе того, как вы это создали.

Если вы хотите, вы можете четко указать тип ваших данных, а не полагаться на вывод типа Swift, например:

```swift
let album: String = "Reputation"
let year: Int = 1989
let height: Double = 1.78
let taylorRocks: Bool = true
```

Обратите внимание, что логические значения имеют краткое имя типа `Bool`, так же как целые числа имеют краткое имя типа `Int`.

### **Почему в Swift есть аннотации типов?**

*Обновлено для Xcode 12.0*

При изучении Swift люди часто задают вопрос: «Почему в Swift есть аннотации типов?», За которым обычно следует «когда мне следует использовать аннотации типов в Swift?»

Ответ на первый вопрос - это в первую очередь одна из трех причин:

1. Swift не может понять, какой тип следует использовать.
2. Вы хотите, чтобы Swift использовал тип, отличный от стандартного.
3. Вы пока не хотите присваивать значение.

Первое из них обычно происходит только в более сложном коде. Например, если вы загружали из Интернета какие-то данные, которые, как вы знаете, являются именем вашего местного политика, Swift не может знать об этом заранее, поэтому вам нужно будет сообщить это.

Второй сценарий довольно распространен, поскольку вы узнаете больше о Swift, но сейчас простой пример пытается создать двойную переменную без необходимости постоянно писать «.0» везде:

```swift
var percentage: Double = 99
```

Он создает переменную `percentage` с типом double и со значением 99,0. Да, мы присвоили ему целое число, но наша аннотация типа дает понять, что фактический тип данных, который нам нужен, является двойным.

Третий вариант используется, когда вы хотите сообщить Swift, что переменная будет существовать, но пока не хотите устанавливать ее значение. Это происходит во многих местах Swift и выглядит так:

```swift
var name: String
```

Затем вы можете назначить строку для `name` позже, но вы не можете назначить другой тип, потому что Swift знает, что это будет недопустимым.

Конечно, второй вопрос здесь: «Когда мне следует использовать аннотации типов в Swift?» Это гораздо более субъективно, потому что ответ обычно зависит от вашего личного стиля.

В моем собственном коде я предпочитаю как можно больше использовать вывод типов. Это означает, что я оставляю аннотации типов и позволяю Swift определять типы вещей на основе того, какие данные я в них храню. Мои причины для этого:

1. Это делает мой код короче и легче читается.
2. Это позволяет мне изменить тип чего-либо, просто изменив его начальное значение.

Некоторые другие люди предпочитают всегда использовать явную аннотацию типов, и это тоже отлично работает - это действительно вопрос стиля.

****
## **Итог**

Вы дошли до конца первой части этой серии, так что давайте подведем итоги.

1. Вы создаете переменные, используя `var`, а константы, используя `let`. Желательно как можно чаще используйте константы.
2. Строки начинаются и заканчиваются двойными кавычками, но если вы хотите, чтобы они занимали несколько строк, вам следует использовать три набора двойных кавычек.
3. Int содержат целые числа, double - дробные числа, а bool имеют значение true или false.
4. Интерполяция строк позволяет вам создавать строки из других переменных и констант, помещая их значения в вашу строку.
5. Swift использует вывод типа для присвоения типа каждой переменной или константе, но вы можете указать явные типы, если хотите.